# Домашнее задание №11 (Тема "Виды индексов. Работа с индексами и оптимизация запросов")

Описание/Пошаговая инструкция выполнения домашнего задания:

  <br>__*На виртуальной машине развернул кластер Postgres версии 15. Создал базу данных testdb. В этой базе данных создал таблицу test, наполнил её случайно сгенерированными данными в количестве 1 000 000 записей.*__
  > <img src="pic/0_1.JPG" align="center" />
  <br>__*У таблицы test поля: id (порядковый номер записи) - тип integer, dt (случайная дата) - тип timestamp, str (строка) - тип text.*__
  > <img src="pic/0_2.JPG" align="center" />
  <br>__*Данные в поле str следующего вида:*__
  > <img src="pic/0_3.JPG" align="center" />

* Создать индекс к какой-либо из таблиц вашей БД
  <br>__*Перед тем, как создать индекс к таблице test и заметить как он влияет на чтение данных по индексированному полю, проверю командой EXPLAIN, как происходит чтение данных из таблицы без индексов.*__
  > <img src="pic/1_1.JPG" align="center" />
  <br>__*Чтение данных из таблицы может выполняться несколькими способами. Команда EXPLAIN сообщает, что используется Seq Scan — последовательное, блок за блоком, чтение данных таблицы test. Затратность операции: 0.00 — затраты на получение первой строки, второе значение — 17245.00 — затраты на получение всех строк. Rows — приблизительное количество возвращаемых строк при выполнении операции Seq Scan. Это значение возвращает планировщик.*__
  
   <br>__*Теперь создаю уникальный индекс indx_test_dt на поле dt таблицы test.*__
  
* Прислать текстом результат команды explain, в которой используется данный индекс
  <br>__*После создания индекса indx_test_dt выполняю тот же самый запрос с командой EXPLAIN, что и впрошлый раз.*__
  > <img src="pic/2_1.JPG" align="center" />
  <br>__*Так как в своем запросе я делаю поиск по полю dt, по которому создан индекс indx_test_dt, то чтение данных уже происходит через Index Scan. Bitmap Index Scan — используется для определения нужных нам записей, а затем PostgreSQL обращается в саму таблицу (Bitmap Heap Scan), чтобы убедиться, что эти записи на самом деле существуют. В моем примере затратность операции стала 7.19, а без индекса было 17245.*__
  
* Реализовать индекс для полнотекстового поиска
  > <img src="pic/3_1.JPG" align="center" />
  g
  > <img src="pic/3_2.JPG" align="center" />
* Реализовать индекс на часть таблицы или индекс на поле с функцией
  > <img src="pic/4_1.JPG" align="center" />
  > <img src="pic/4_2.JPG" align="center" />
  > <img src="pic/4_3.JPG" align="center" />
* Создать индекс на несколько полей
  > <img src="pic/5_1.JPG" align="center" />
  > <img src="pic/5_2.JPG" align="center" />
* Написать комментарии к каждому из индексов
* Описать что и как делали и с какими проблемами столкнулись

  
